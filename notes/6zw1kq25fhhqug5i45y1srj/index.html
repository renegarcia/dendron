<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/dendron/favicon.ico"/><title>Como extraer metadatos del volcado de una base de datos</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Personal Knowledge Space or Rene Garcia"/><meta property="og:title" content="Como extraer metadatos del volcado de una base de datos"/><meta property="og:description" content="Personal Knowledge Space or Rene Garcia"/><meta property="og:url" content="https://renegarcia.github.io/dendron/notes/6zw1kq25fhhqug5i45y1srj/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="5/20/2023"/><meta property="article:modified_time" content="5/30/2023"/><link rel="canonical" href="https://renegarcia.github.io/dendron/notes/6zw1kq25fhhqug5i45y1srj/"/><meta name="next-head-count" content="14"/><link rel="preload" href="/dendron/_next/static/css/73d407bcec34438f.css" as="style"/><link rel="stylesheet" href="/dendron/_next/static/css/73d407bcec34438f.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/dendron/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/dendron/_next/static/chunks/webpack-ccfd45c42f44eb4c.js" defer=""></script><script src="/dendron/_next/static/chunks/framework-28c999baf2863c3d.js" defer=""></script><script src="/dendron/_next/static/chunks/main-8fed4842a239c7a9.js" defer=""></script><script src="/dendron/_next/static/chunks/pages/_app-7af6e3b275d70d85.js" defer=""></script><script src="/dendron/_next/static/chunks/935-4dee79e80b8641c6.js" defer=""></script><script src="/dendron/_next/static/chunks/6-50972def09142ee2.js" defer=""></script><script src="/dendron/_next/static/chunks/pages/notes/%5Bid%5D-78d472fa3b924116.js" defer=""></script><script src="/dendron/_next/static/6Zkb9p3DY-DVMGnZzSWvr/_buildManifest.js" defer=""></script><script src="/dendron/_next/static/6Zkb9p3DY-DVMGnZzSWvr/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><section class="ant-layout" style="width:100%;min-height:100%"><header class="ant-layout-header" style="position:fixed;isolation:isolate;z-index:1;width:100%;border-bottom:1px solid #d4dadf;height:64px;padding:0 24px 0 2px"><div class="ant-row ant-row-center" style="max-width:992px;justify-content:space-between;margin:0 auto"><div style="display:flex" class="ant-col ant-col-xs-20 ant-col-sm-4"></div><div class="ant-col gutter-row ant-col-xs-0 ant-col-sm-20 ant-col-md-20 ant-col-lg-19"><div class="ant-select ant-select-lg ant-select-auto-complete ant-select-single ant-select-allow-clear ant-select-show-search" style="width:100%"><div class="ant-select-selector"><span class="ant-select-selection-search"><input type="search" autoComplete="off" class="ant-select-selection-search-input" role="combobox" aria-haspopup="listbox" aria-owns="undefined_list" aria-autocomplete="list" aria-controls="undefined_list" aria-activedescendant="undefined_list_0" value=""/></span><span class="ant-select-selection-placeholder">For full text search please use the &#x27;?&#x27; prefix. e.g. ? Onboarding</span></div></div></div><div style="display:none;align-items:center;justify-content:center" class="ant-col ant-col-xs-4 ant-col-sm-4 ant-col-md-0 ant-col-lg-0"><span role="img" aria-label="menu" style="font-size:24px" tabindex="-1" class="anticon anticon-menu"><svg viewBox="64 64 896 896" focusable="false" data-icon="menu" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"></path></svg></span></div></div></header><section class="ant-layout" style="margin-top:64px;display:flex;flex-direction:row"><div class="site-layout-sidebar" style="flex:0 0 auto;width:calc(max((100% - 992px) / 2, 0px) + 200px);min-width:200px;padding-left:calc((100% - 992px) / 2)"><aside class="ant-layout-sider ant-layout-sider-dark" style="position:fixed;overflow:auto;height:calc(100vh - 64px);background-color:transparent;flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"></div></aside></div><main class="ant-layout-content side-layout-main" style="max-width:1200px;min-width:0;display:block"><div style="padding:0 24px"><div class="main-content" role="main"><div class="ant-row"><div class="ant-col ant-col-24"><div class="ant-row" style="margin-left:-10px;margin-right:-10px"><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-24 ant-col-md-18"><div><h1 id="como-extraer-metadatos-del-volcado-de-una-base-de-datos">Como extraer metadatos del volcado de una base de datos<a aria-hidden="true" class="anchor-heading icon-link" href="#como-extraer-metadatos-del-volcado-de-una-base-de-datos"></a></h1>
<h2 id="resultado">Resultado<a aria-hidden="true" class="anchor-heading icon-link" href="#resultado"></a></h2>
<p><a href="https://renegarcia.github.io/eleventa-db/">Consultar</a> la base de datos Eleventa.</p>
<h2 id="código">Código<a aria-hidden="true" class="anchor-heading icon-link" href="#código"></a></h2>
<p>Primero instalamos el paquete <code>sqlparse</code>. Desde <code>pypy</code>:</p>
<pre class="language-shell"><code class="language-shell">pip <span class="token function">install</span> sqlparse
</code></pre>
<p>Si utlizamos <code>poetry</code>:</p>
<pre class="language-shell"><code class="language-shell">poetry <span class="token function">add</span> sqlparse
</code></pre>
<p>Una vez instalado, en una sesión de <code>python</code> lo podemos importar de la manera usual</p>
<pre class="language-python"><code class="language-python"><span class="token keyword">from</span> typing <span class="token keyword">import</span> Optional
<span class="token keyword">from</span> sqlparse<span class="token punctuation">.</span>sql <span class="token keyword">import</span> Statement
<span class="token keyword">from</span> sqlparse<span class="token punctuation">.</span>tokens <span class="token keyword">import</span> Keyword
<span class="token keyword">from</span> dataclasses <span class="token keyword">import</span> dataclass
<span class="token keyword">import</span> sqlparse
</code></pre>
<h2 id="extrayendo-el-nombre-de-una-definición-de-tabla">Extrayendo el nombre de una definición de tabla<a aria-hidden="true" class="anchor-heading icon-link" href="#extrayendo-el-nombre-de-una-definición-de-tabla"></a></h2>
<p>Vamos a utilizar el siguiente ejemplo de <code>SQL</code> para aprender a extraer la información que necesitamos</p>
<pre class="language-python"><code class="language-python">TABLE <span class="token operator">=</span> <span class="token triple-quoted-string string">"""CREATE TABLE IF NOT EXISTS MY_TABLE (ID TLLAVE NOT NULL,
    CONSTRAINT PK_MY_TABLE PRIMARY KEY (ID));
"""</span>
</code></pre>
<pre class="language-python"><code class="language-python">parsed <span class="token operator">=</span> sqlparse<span class="token punctuation">.</span>parse<span class="token punctuation">(</span>TABLE<span class="token punctuation">)</span> <span class="token comment"># Devuelve una tupla de statements sql contenidos en la cadena</span>
statement <span class="token operator">=</span> parsed<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
</code></pre>
<pre class="language-python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>statement<span class="token punctuation">)</span>
</code></pre>
<pre><code>CREATE TABLE IF NOT EXISTS MY_TABLE (ID TLLAVE NOT NULL,
    CONSTRAINT PK_MY_TABLE PRIMARY KEY (ID));
</code></pre>
<p><code>statement</code> es una variable tipo <code>Statement</code> que puede ser iterada por medio de índices o ciclos.</p>
<pre class="language-python"><code class="language-python">token <span class="token operator">=</span> statement<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>statement<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<pre><code>&#x3C;class 'sqlparse.sql.Statement'> &#x3C;class 'sqlparse.sql.Token'>
</code></pre>
<p>Cada token define dos atributos: <code>value</code> y <code>ttype</code>, sin embargo el parser es flojo, al invocarlo evitará escanear recursivamente la cadena como se puede ver en los siguientes ejemplos.</p>
<pre class="language-python"><code class="language-python"><span class="token comment"># En este caso, el primer token tiene un valor definido y un tipo.</span>
token<span class="token punctuation">.</span>value<span class="token punctuation">,</span> token<span class="token punctuation">.</span>ttype
</code></pre>
<pre><code>('CREATE', Token.Keyword.DDL)
</code></pre>
<pre class="language-python"><code class="language-python"><span class="token comment"># En este ciclo se puede ver que los tokens 11 y 13 no fueron analizados por el parser.</span>
<span class="token keyword">for</span> i<span class="token punctuation">,</span> token <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>statement<span class="token punctuation">)</span><span class="token punctuation">:</span>
    token_type <span class="token operator">=</span> <span class="token builtin">repr</span><span class="token punctuation">(</span>token<span class="token punctuation">.</span>ttype<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token format-spec">2d</span><span class="token punctuation">}</span></span><span class="token string">. </span><span class="token interpolation"><span class="token punctuation">{</span>token<span class="token punctuation">.</span>value<span class="token punctuation">:</span><span class="token format-spec">50</span><span class="token punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">{</span>token_type<span class="token punctuation">:</span><span class="token format-spec">50</span><span class="token punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">type</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>

</code></pre>
<pre><code> 1. CREATE                                             Token.Keyword.DDL                                  &#x3C;class 'sqlparse.sql.Token'>
 2.                                                    Token.Text.Whitespace                              &#x3C;class 'sqlparse.sql.Token'>
 3. TABLE                                              Token.Keyword                                      &#x3C;class 'sqlparse.sql.Token'>
 4.                                                    Token.Text.Whitespace                              &#x3C;class 'sqlparse.sql.Token'>
 5. IF                                                 Token.Keyword                                      &#x3C;class 'sqlparse.sql.Token'>
 6.                                                    Token.Text.Whitespace                              &#x3C;class 'sqlparse.sql.Token'>
 7. NOT                                                Token.Keyword                                      &#x3C;class 'sqlparse.sql.Token'>
 8.                                                    Token.Text.Whitespace                              &#x3C;class 'sqlparse.sql.Token'>
 9. EXISTS                                             Token.Keyword                                      &#x3C;class 'sqlparse.sql.Token'>
10.                                                    Token.Text.Whitespace                              &#x3C;class 'sqlparse.sql.Token'>
11. MY_TABLE                                           None                                               &#x3C;class 'sqlparse.sql.Identifier'>
12.                                                    Token.Text.Whitespace                              &#x3C;class 'sqlparse.sql.Token'>
13. (ID TLLAVE NOT NULL,
    CONSTRAINT PK_MY_TABLE PRIMARY KEY (ID)) None                                               &#x3C;class 'sqlparse.sql.Parenthesis'>
14. ;                                                  Token.Punctuation                                  &#x3C;class 'sqlparse.sql.Token'>
</code></pre>
<p>El método <code>Statement.flatten</code> realizará el parseo de la cadena completa, devolviendo los tipos y valores de cada token encontrado.</p>
<pre class="language-python"><code class="language-python"><span class="token keyword">for</span> i<span class="token punctuation">,</span> token <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>statement<span class="token punctuation">.</span>flatten<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    token_type <span class="token operator">=</span> <span class="token builtin">repr</span><span class="token punctuation">(</span>token<span class="token punctuation">.</span>ttype<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token format-spec">2d</span><span class="token punctuation">}</span></span><span class="token string">. </span><span class="token interpolation"><span class="token punctuation">{</span>token<span class="token punctuation">.</span>value<span class="token punctuation">:</span><span class="token format-spec">50</span><span class="token punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">{</span>token_type<span class="token punctuation">:</span><span class="token format-spec">50</span><span class="token punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">type</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
</code></pre>
<pre><code> 1. CREATE                                             Token.Keyword.DDL                                  &#x3C;class 'sqlparse.sql.Token'>
 2.                                                    Token.Text.Whitespace                              &#x3C;class 'sqlparse.sql.Token'>
 3. TABLE                                              Token.Keyword                                      &#x3C;class 'sqlparse.sql.Token'>
 4.                                                    Token.Text.Whitespace                              &#x3C;class 'sqlparse.sql.Token'>
 5. IF                                                 Token.Keyword                                      &#x3C;class 'sqlparse.sql.Token'>
 6.                                                    Token.Text.Whitespace                              &#x3C;class 'sqlparse.sql.Token'>
 7. NOT                                                Token.Keyword                                      &#x3C;class 'sqlparse.sql.Token'>
 8.                                                    Token.Text.Whitespace                              &#x3C;class 'sqlparse.sql.Token'>
 9. EXISTS                                             Token.Keyword                                      &#x3C;class 'sqlparse.sql.Token'>
10.                                                    Token.Text.Whitespace                              &#x3C;class 'sqlparse.sql.Token'>
11. MY_TABLE                                           Token.Name                                         &#x3C;class 'sqlparse.sql.Token'>
12.                                                    Token.Text.Whitespace                              &#x3C;class 'sqlparse.sql.Token'>
13. (                                                  Token.Punctuation                                  &#x3C;class 'sqlparse.sql.Token'>
14. ID                                                 Token.Name                                         &#x3C;class 'sqlparse.sql.Token'>
15.                                                    Token.Text.Whitespace                              &#x3C;class 'sqlparse.sql.Token'>
16. TLLAVE                                             Token.Name                                         &#x3C;class 'sqlparse.sql.Token'>
17.                                                    Token.Text.Whitespace                              &#x3C;class 'sqlparse.sql.Token'>
18. NOT NULL                                           Token.Keyword                                      &#x3C;class 'sqlparse.sql.Token'>
19. ,                                                  Token.Punctuation                                  &#x3C;class 'sqlparse.sql.Token'>
20. 
                                                  Token.Text.Whitespace.Newline                      &#x3C;class 'sqlparse.sql.Token'>
21.                                                    Token.Text.Whitespace                              &#x3C;class 'sqlparse.sql.Token'>
22.                                                    Token.Text.Whitespace                              &#x3C;class 'sqlparse.sql.Token'>
23.                                                    Token.Text.Whitespace                              &#x3C;class 'sqlparse.sql.Token'>
24.                                                    Token.Text.Whitespace                              &#x3C;class 'sqlparse.sql.Token'>
25. CONSTRAINT                                         Token.Keyword                                      &#x3C;class 'sqlparse.sql.Token'>
26.                                                    Token.Text.Whitespace                              &#x3C;class 'sqlparse.sql.Token'>
27. PK_MY_TABLE                                        Token.Name                                         &#x3C;class 'sqlparse.sql.Token'>
28.                                                    Token.Text.Whitespace                              &#x3C;class 'sqlparse.sql.Token'>
29. PRIMARY                                            Token.Keyword                                      &#x3C;class 'sqlparse.sql.Token'>
30.                                                    Token.Text.Whitespace                              &#x3C;class 'sqlparse.sql.Token'>
31. KEY                                                Token.Keyword                                      &#x3C;class 'sqlparse.sql.Token'>
32.                                                    Token.Text.Whitespace                              &#x3C;class 'sqlparse.sql.Token'>
33. (                                                  Token.Punctuation                                  &#x3C;class 'sqlparse.sql.Token'>
34. ID                                                 Token.Name                                         &#x3C;class 'sqlparse.sql.Token'>
35. )                                                  Token.Punctuation                                  &#x3C;class 'sqlparse.sql.Token'>
36. )                                                  Token.Punctuation                                  &#x3C;class 'sqlparse.sql.Token'>
37. ;                                                  Token.Punctuation                                  &#x3C;class 'sqlparse.sql.Token'>
</code></pre>
<h3 id="método-para-obtener-el-nombre-de-la-tabla">Método para obtener el nombre de la tabla<a aria-hidden="true" class="anchor-heading icon-link" href="#método-para-obtener-el-nombre-de-la-tabla"></a></h3>
<p>Las tablas que nos interesa analizar todas tienen siempre la siguiente estructura </p>
<pre class="language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">[</span><span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span><span class="token punctuation">]</span> my_table_name <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre>
<p>por lo que para encontrar el nombre de la tabla necesitamos encontrar el primer token de tipo <code>Identifier</code> que encontnró el parser y extraer su valor, como se ve en el siguiente ejemplo:</p>
<pre class="language-python"><code class="language-python"><span class="token keyword">for</span> token <span class="token keyword">in</span> statement<span class="token punctuation">:</span>
    <span class="token keyword">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>token<span class="token punctuation">,</span> sqlparse<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>Identifier<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>token<span class="token punctuation">.</span>get_name<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>upper<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">break</span>
</code></pre>
<pre><code>MY_TABLE
</code></pre>
<h2 id="extrayendo-una-lista-de-tablas-y-sus-nombres">Extrayendo una lista de tablas y sus nombres<a aria-hidden="true" class="anchor-heading icon-link" href="#extrayendo-una-lista-de-tablas-y-sus-nombres"></a></h2>
<p>El volcado SQL puede tener una mezcla de definiciones de estructuras de datos y otros tipos de código SQL, por ejemplo un query de búsqueda</p>
<pre class="language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> MY_TABLE <span class="token punctuation">(</span>ID TLLAVE <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token keyword">CONSTRAINT</span> PK_MY_TABLE <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>ID<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> ANOTHER_TABLE<span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> MY_OTHER_TABLE <span class="token punctuation">(</span>ID TLLAVE <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
    <span class="token keyword">CONSTRAINT</span> PK_MY_TABLE <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>ID<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>lo que hacemos es utilizar <code>sqlparse</code> para encontrar cada statement y determiar si es de tipo <code>CREATE</code> de modo que para statements de este tipo aplicamos el algoritmo de la sección anterior para encontrar el nombre de la tabla.</p>
<pre class="language-python"><code class="language-python">SQLDUMP <span class="token operator">=</span> <span class="token triple-quoted-string string">"""CREATE TABLE IF NOT EXISTS MY_TABLE (ID TLLAVE NOT NULL,
    CONSTRAINT PK_MY_TABLE PRIMARY KEY (ID));

SELECT * FROM ANOTHER_TABLE;

CREATE TABLE IF NOT EXISTS MY_OTHER_TABLE (ID TLLAVE NOT NULL,
    CONSTRAINT PK_MY_TABLE PRIMARY KEY (ID));
"""</span>

parsed <span class="token operator">=</span> sqlparse<span class="token punctuation">.</span>parse<span class="token punctuation">(</span>SQLDUMP<span class="token punctuation">)</span>
<span class="token keyword">for</span> i<span class="token punctuation">,</span> statement <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>parsed<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>i<span class="token punctuation">}</span></span><span class="token string">. </span><span class="token interpolation"><span class="token punctuation">{</span>statement<span class="token punctuation">.</span>get_type<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
</code></pre>
<pre><code>0. CREATE
1. SELECT
2. CREATE
</code></pre>
<pre class="language-python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">get_name</span><span class="token punctuation">(</span>statement<span class="token punctuation">:</span> Statement<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> Optional<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> token <span class="token keyword">in</span> statement<span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>token<span class="token punctuation">,</span> sqlparse<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>Identifier<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> token<span class="token punctuation">.</span>value
    <span class="token keyword">return</span> <span class="token boolean">None</span> 
</code></pre>
<pre class="language-python"><code class="language-python"><span class="token keyword">for</span> i<span class="token punctuation">,</span> statement <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>parsed<span class="token punctuation">)</span><span class="token punctuation">:</span>
    statement_type <span class="token operator">=</span> statement<span class="token punctuation">.</span>get_type<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> statement_type <span class="token operator">==</span> <span class="token string">"CREATE"</span><span class="token punctuation">:</span>
        name <span class="token operator">=</span> get_name<span class="token punctuation">(</span>statement<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>i<span class="token punctuation">}</span></span><span class="token string">. </span><span class="token interpolation"><span class="token punctuation">{</span>statement_type<span class="token punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">{</span>name<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
</code></pre>
<pre><code>0. CREATE: MY_TABLE
2. CREATE: MY_OTHER_TABLE
</code></pre>
<h3 id="determinando-el-tipo-de-objeto-creado">Determinando el tipo de objeto creado<a aria-hidden="true" class="anchor-heading icon-link" href="#determinando-el-tipo-de-objeto-creado"></a></h3>
<p>En un caso más general, podemos tener volcados sql con varios tipos de objetos, por ejemplo</p>
<pre class="language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> MY_TABLE <span class="token punctuation">(</span>ID <span class="token keyword">INTEGER</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> MY_INDEX <span class="token keyword">ON</span> MY_TABLE<span class="token punctuation">(</span>ID<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>analizando los tokens de cada statement es posible determinar el tipo de objeto.</p>
<pre class="language-python"><code class="language-python">SQL <span class="token operator">=</span> <span class="token triple-quoted-string string">"""CREATE TABLE MY_TABLE (ID INTEGER NOT NULL);

SELECT * FROM MY_OTHER_TABLE;

CREATE INDEX MY_INDEX ON MY_TABLE(ID);
"""</span>

parsed <span class="token operator">=</span> sqlparse<span class="token punctuation">.</span>parse<span class="token punctuation">(</span>SQL<span class="token punctuation">)</span>
statement <span class="token operator">=</span> parsed<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>


</code></pre>
<pre class="language-python"><code class="language-python">type_found <span class="token operator">=</span> <span class="token boolean">False</span> 
name_found <span class="token operator">=</span> <span class="token boolean">False</span> 
<span class="token keyword">for</span> token <span class="token keyword">in</span> statement<span class="token punctuation">:</span>
    <span class="token keyword">if</span> type_found <span class="token keyword">and</span> name_found<span class="token punctuation">:</span>
        <span class="token keyword">break</span>
    <span class="token keyword">elif</span> token<span class="token punctuation">.</span>ttype <span class="token keyword">is</span> Keyword <span class="token keyword">and</span> <span class="token keyword">not</span> type_found<span class="token punctuation">:</span>
        type_found <span class="token operator">=</span> <span class="token boolean">True</span> 
        token_type <span class="token operator">=</span> token<span class="token punctuation">.</span>value
    <span class="token keyword">elif</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>token<span class="token punctuation">,</span> sqlparse<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>Identifier<span class="token punctuation">)</span> <span class="token keyword">and</span> <span class="token keyword">not</span> name_found<span class="token punctuation">:</span>
        name_found <span class="token operator">=</span> <span class="token boolean">True</span> 
        token_name <span class="token operator">=</span> token<span class="token punctuation">.</span>value
<span class="token keyword">print</span> <span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"tipo: </span><span class="token interpolation"><span class="token punctuation">{</span>token_type<span class="token punctuation">}</span></span><span class="token string">, nombre: </span><span class="token interpolation"><span class="token punctuation">{</span>token_name<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
</code></pre>
<pre><code>tipo: TABLE, nombre: MY_TABLE
</code></pre>
<p>En el código anterior asumimos que todas las cláusulas son simples, es decir del estilo "CREATE ....", si estuvieran agrupadas, por ejemplo "(CREATE ....)" el  algoritmo ya no es tan simple, pues debe de realizar el escaneo de manera recursiva, un ejemplo de este tipo de algoritmo se encuentra en el repositorio de <code>sqlparse</code>:</p>
<p><a href="https://github.com/andialbrecht/sqlparse/blob/master/examples/extract_table_names.py">https://github.com/andialbrecht/sqlparse/blob/master/examples/extract_table_names.py</a></p>
<h3 id="extrayendo-el-nombre-y-tipo-de-objeto-creado-de-un-volcado-completo">Extrayendo el nombre y tipo de objeto creado de un volcado completo<a aria-hidden="true" class="anchor-heading icon-link" href="#extrayendo-el-nombre-y-tipo-de-objeto-creado-de-un-volcado-completo"></a></h3>
<pre class="language-python"><code class="language-python">SQL <span class="token operator">=</span> <span class="token triple-quoted-string string">"""CREATE TABLE MY_TABLE (ID INTEGER NOT NULL);

SELECT * FROM MY_OTHER_TABLE;

CREATE INDEX MY_INDEX ON MY_TABLE(ID);
"""</span>

<span class="token decorator annotation punctuation">@dataclass</span>
<span class="token keyword">class</span> <span class="token class-name">Metadata</span><span class="token punctuation">:</span>
    <span class="token builtin">type</span><span class="token punctuation">:</span> <span class="token builtin">str</span>
    name<span class="token punctuation">:</span> <span class="token builtin">str</span> 
    
<span class="token keyword">def</span> <span class="token function">get_metadata</span><span class="token punctuation">(</span>statement<span class="token punctuation">:</span> Statement<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">></span> Metadata<span class="token punctuation">:</span>
    type_found <span class="token operator">=</span> <span class="token boolean">False</span> 
    name_found <span class="token operator">=</span> <span class="token boolean">False</span> 
    object_name <span class="token operator">=</span> <span class="token boolean">None</span> 
    object_type <span class="token operator">=</span> <span class="token boolean">None</span> 
    <span class="token keyword">for</span> token <span class="token keyword">in</span> statement<span class="token punctuation">:</span>
        <span class="token keyword">if</span> type_found <span class="token keyword">and</span> name_found<span class="token punctuation">:</span>
            <span class="token keyword">break</span>
        <span class="token keyword">elif</span> token<span class="token punctuation">.</span>ttype <span class="token keyword">is</span> Keyword <span class="token keyword">and</span> <span class="token keyword">not</span> type_found<span class="token punctuation">:</span>
            type_found <span class="token operator">=</span> <span class="token boolean">True</span> 
            object_type <span class="token operator">=</span> token<span class="token punctuation">.</span>value
        <span class="token keyword">elif</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>token<span class="token punctuation">,</span> sqlparse<span class="token punctuation">.</span>sql<span class="token punctuation">.</span>Identifier<span class="token punctuation">)</span> <span class="token keyword">and</span> <span class="token keyword">not</span> name_found<span class="token punctuation">:</span>
            name_found <span class="token operator">=</span> <span class="token boolean">True</span> 
            object_name <span class="token operator">=</span> token<span class="token punctuation">.</span>value
    <span class="token keyword">return</span> Metadata<span class="token punctuation">(</span>name<span class="token operator">=</span>object_name<span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span>object_type<span class="token punctuation">)</span>


parsed <span class="token operator">=</span> sqlparse<span class="token punctuation">.</span>parse<span class="token punctuation">(</span>SQL<span class="token punctuation">)</span>

<span class="token keyword">for</span> i<span class="token punctuation">,</span> statement <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>parsed<span class="token punctuation">)</span><span class="token punctuation">:</span>
    name_found <span class="token operator">=</span> <span class="token boolean">False</span> 
    <span class="token keyword">if</span> statement<span class="token punctuation">.</span>get_type<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token string">"CREATE"</span><span class="token punctuation">:</span>
        <span class="token keyword">continue</span>
    metadata <span class="token operator">=</span> get_metadata<span class="token punctuation">(</span>statement<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> metadata<span class="token punctuation">)</span>
</code></pre>
<pre><code>0 Metadata(type='TABLE', name='MY_TABLE')
2 Metadata(type='INDEX', name='MY_INDEX')
</code></pre>
<h2 id="referencias">Referencias<a aria-hidden="true" class="anchor-heading icon-link" href="#referencias"></a></h2>
<ol>
<li><a href="https://sqlparse.readthedocs.io/en/latest/">https://sqlparse.readthedocs.io/en/latest/</a></li>
<li><a href="https://github.com/andialbrecht/sqlparse/blob/master/examples/extract_table_names.py">https://github.com/andialbrecht/sqlparse/blob/master/examples/extract_table_names.py</a></li>
</ol></div></div><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-0 ant-col-md-6"><div><div class=""><div class="ant-anchor-wrapper dendron-toc" style="max-height:calc(100vh - 64px);z-index:1"><div class="ant-anchor"><div class="ant-anchor-ink"><span class="ant-anchor-ink-ball"></span></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#resultado" title="Resultado">Resultado</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#código" title="Código">Código</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#extrayendo-el-nombre-de-una-definición-de-tabla" title="Extrayendo el nombre de una definición de tabla">Extrayendo el nombre de una definición de tabla</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#método-para-obtener-el-nombre-de-la-tabla" title="Método para obtener el nombre de la tabla">Método para obtener el nombre de la tabla</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#extrayendo-una-lista-de-tablas-y-sus-nombres" title="Extrayendo una lista de tablas y sus nombres">Extrayendo una lista de tablas y sus nombres</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#determinando-el-tipo-de-objeto-creado" title="Determinando el tipo de objeto creado">Determinando el tipo de objeto creado</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#extrayendo-el-nombre-y-tipo-de-objeto-creado-de-un-volcado-completo" title="Extrayendo el nombre y tipo de objeto creado de un volcado completo">Extrayendo el nombre y tipo de objeto creado de un volcado completo</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#referencias" title="Referencias">Referencias</a></div></div></div></div></div></div></div></div></div></div></div><div class="ant-divider ant-divider-horizontal" role="separator"></div><footer class="ant-layout-footer" style="padding:0 24px 24px"></footer></main></section></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"id":"6zw1kq25fhhqug5i45y1srj","title":"Como extraer metadatos del volcado de una base de datos","desc":"","updated":1685478604651,"created":1684612996461,"custom":{},"fname":"code.python.sqlparse","type":"note","vault":{"fsPath":".","selfContained":true,"name":"Dendron"},"contentHash":"c048ad49104154ba39e89c879d9baf55","links":[],"anchors":{"resultado":{"type":"header","text":"Resultado","value":"resultado","line":8,"column":0,"depth":2},"código":{"type":"header","text":"Código","value":"código","line":12,"column":0,"depth":2},"extrayendo-el-nombre-de-una-definición-de-tabla":{"type":"header","text":"Extrayendo el nombre de una definición de tabla","value":"extrayendo-el-nombre-de-una-definición-de-tabla","line":38,"column":0,"depth":2},"método-para-obtener-el-nombre-de-la-tabla":{"type":"header","text":"Método para obtener el nombre de la tabla","value":"método-para-obtener-el-nombre-de-la-tabla","line":165,"column":0,"depth":3},"extrayendo-una-lista-de-tablas-y-sus-nombres":{"type":"header","text":"Extrayendo una lista de tablas y sus nombres","value":"extrayendo-una-lista-de-tablas-y-sus-nombres","line":186,"column":0,"depth":2},"determinando-el-tipo-de-objeto-creado":{"type":"header","text":"Determinando el tipo de objeto creado","value":"determinando-el-tipo-de-objeto-creado","line":245,"column":0,"depth":3},"extrayendo-el-nombre-y-tipo-de-objeto-creado-de-un-volcado-completo":{"type":"header","text":"Extrayendo el nombre y tipo de objeto creado de un volcado completo","value":"extrayendo-el-nombre-y-tipo-de-objeto-creado-de-un-volcado-completo","line":296,"column":0,"depth":3},"referencias":{"type":"header","text":"Referencias","value":"referencias","line":343,"column":0,"depth":2}},"children":[],"parent":"hwyvw05ski3srgkxy31ym7w","data":{}},"body":"\u003ch1 id=\"como-extraer-metadatos-del-volcado-de-una-base-de-datos\"\u003eComo extraer metadatos del volcado de una base de datos\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#como-extraer-metadatos-del-volcado-de-una-base-de-datos\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003ch2 id=\"resultado\"\u003eResultado\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#resultado\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://renegarcia.github.io/eleventa-db/\"\u003eConsultar\u003c/a\u003e la base de datos Eleventa.\u003c/p\u003e\n\u003ch2 id=\"código\"\u003eCódigo\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#código\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003ePrimero instalamos el paquete \u003ccode\u003esqlparse\u003c/code\u003e. Desde \u003ccode\u003epypy\u003c/code\u003e:\u003c/p\u003e\n\u003cpre class=\"language-shell\"\u003e\u003ccode class=\"language-shell\"\u003epip \u003cspan class=\"token function\"\u003einstall\u003c/span\u003e sqlparse\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSi utlizamos \u003ccode\u003epoetry\u003c/code\u003e:\u003c/p\u003e\n\u003cpre class=\"language-shell\"\u003e\u003ccode class=\"language-shell\"\u003epoetry \u003cspan class=\"token function\"\u003eadd\u003c/span\u003e sqlparse\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eUna vez instalado, en una sesión de \u003ccode\u003epython\u003c/code\u003e lo podemos importar de la manera usual\u003c/p\u003e\n\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python\"\u003e\u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e typing \u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e Optional\n\u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e sqlparse\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003esql \u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e Statement\n\u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e sqlparse\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003etokens \u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e Keyword\n\u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e dataclasses \u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e dataclass\n\u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e sqlparse\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"extrayendo-el-nombre-de-una-definición-de-tabla\"\u003eExtrayendo el nombre de una definición de tabla\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#extrayendo-el-nombre-de-una-definición-de-tabla\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eVamos a utilizar el siguiente ejemplo de \u003ccode\u003eSQL\u003c/code\u003e para aprender a extraer la información que necesitamos\u003c/p\u003e\n\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python\"\u003eTABLE \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token triple-quoted-string string\"\u003e\"\"\"CREATE TABLE IF NOT EXISTS MY_TABLE (ID TLLAVE NOT NULL,\n    CONSTRAINT PK_MY_TABLE PRIMARY KEY (ID));\n\"\"\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python\"\u003eparsed \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e sqlparse\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eparse\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eTABLE\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token comment\"\u003e# Devuelve una tupla de statements sql contenidos en la cadena\u003c/span\u003e\nstatement \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e parsed\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python\"\u003e\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003estatement\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode\u003eCREATE TABLE IF NOT EXISTS MY_TABLE (ID TLLAVE NOT NULL,\n    CONSTRAINT PK_MY_TABLE PRIMARY KEY (ID));\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003estatement\u003c/code\u003e es una variable tipo \u003ccode\u003eStatement\u003c/code\u003e que puede ser iterada por medio de índices o ciclos.\u003c/p\u003e\n\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python\"\u003etoken \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e statement\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token builtin\"\u003etype\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003estatement\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token builtin\"\u003etype\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003etoken\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode\u003e\u0026#x3C;class 'sqlparse.sql.Statement'\u003e \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eCada token define dos atributos: \u003ccode\u003evalue\u003c/code\u003e y \u003ccode\u003ettype\u003c/code\u003e, sin embargo el parser es flojo, al invocarlo evitará escanear recursivamente la cadena como se puede ver en los siguientes ejemplos.\u003c/p\u003e\n\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python\"\u003e\u003cspan class=\"token comment\"\u003e# En este caso, el primer token tiene un valor definido y un tipo.\u003c/span\u003e\ntoken\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003evalue\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e token\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ettype\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode\u003e('CREATE', Token.Keyword.DDL)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python\"\u003e\u003cspan class=\"token comment\"\u003e# En este ciclo se puede ver que los tokens 11 y 13 no fueron analizados por el parser.\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e token \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eenumerate\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003estatement\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    token_type \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token builtin\"\u003erepr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003etoken\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ettype\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string-interpolation\"\u003e\u003cspan class=\"token string\"\u003ef\"\u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003ei\u003cspan class=\"token operator\"\u003e+\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\u003cspan class=\"token format-spec\"\u003e2d\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e. \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003etoken\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003evalue\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\u003cspan class=\"token format-spec\"\u003e50\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003etoken_type\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\u003cspan class=\"token format-spec\"\u003e50\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token builtin\"\u003etype\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003etoken\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode\u003e 1. CREATE                                             Token.Keyword.DDL                                  \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n 2.                                                    Token.Text.Whitespace                              \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n 3. TABLE                                              Token.Keyword                                      \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n 4.                                                    Token.Text.Whitespace                              \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n 5. IF                                                 Token.Keyword                                      \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n 6.                                                    Token.Text.Whitespace                              \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n 7. NOT                                                Token.Keyword                                      \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n 8.                                                    Token.Text.Whitespace                              \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n 9. EXISTS                                             Token.Keyword                                      \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n10.                                                    Token.Text.Whitespace                              \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n11. MY_TABLE                                           None                                               \u0026#x3C;class 'sqlparse.sql.Identifier'\u003e\n12.                                                    Token.Text.Whitespace                              \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n13. (ID TLLAVE NOT NULL,\n    CONSTRAINT PK_MY_TABLE PRIMARY KEY (ID)) None                                               \u0026#x3C;class 'sqlparse.sql.Parenthesis'\u003e\n14. ;                                                  Token.Punctuation                                  \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eEl método \u003ccode\u003eStatement.flatten\u003c/code\u003e realizará el parseo de la cadena completa, devolviendo los tipos y valores de cada token encontrado.\u003c/p\u003e\n\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python\"\u003e\u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e token \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eenumerate\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003estatement\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eflatten\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    token_type \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token builtin\"\u003erepr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003etoken\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ettype\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string-interpolation\"\u003e\u003cspan class=\"token string\"\u003ef\"\u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003ei\u003cspan class=\"token operator\"\u003e+\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\u003cspan class=\"token format-spec\"\u003e2d\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e. \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003etoken\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003evalue\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\u003cspan class=\"token format-spec\"\u003e50\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003etoken_type\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\u003cspan class=\"token format-spec\"\u003e50\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token builtin\"\u003etype\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003etoken\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode\u003e 1. CREATE                                             Token.Keyword.DDL                                  \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n 2.                                                    Token.Text.Whitespace                              \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n 3. TABLE                                              Token.Keyword                                      \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n 4.                                                    Token.Text.Whitespace                              \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n 5. IF                                                 Token.Keyword                                      \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n 6.                                                    Token.Text.Whitespace                              \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n 7. NOT                                                Token.Keyword                                      \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n 8.                                                    Token.Text.Whitespace                              \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n 9. EXISTS                                             Token.Keyword                                      \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n10.                                                    Token.Text.Whitespace                              \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n11. MY_TABLE                                           Token.Name                                         \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n12.                                                    Token.Text.Whitespace                              \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n13. (                                                  Token.Punctuation                                  \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n14. ID                                                 Token.Name                                         \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n15.                                                    Token.Text.Whitespace                              \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n16. TLLAVE                                             Token.Name                                         \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n17.                                                    Token.Text.Whitespace                              \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n18. NOT NULL                                           Token.Keyword                                      \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n19. ,                                                  Token.Punctuation                                  \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n20. \n                                                  Token.Text.Whitespace.Newline                      \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n21.                                                    Token.Text.Whitespace                              \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n22.                                                    Token.Text.Whitespace                              \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n23.                                                    Token.Text.Whitespace                              \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n24.                                                    Token.Text.Whitespace                              \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n25. CONSTRAINT                                         Token.Keyword                                      \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n26.                                                    Token.Text.Whitespace                              \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n27. PK_MY_TABLE                                        Token.Name                                         \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n28.                                                    Token.Text.Whitespace                              \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n29. PRIMARY                                            Token.Keyword                                      \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n30.                                                    Token.Text.Whitespace                              \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n31. KEY                                                Token.Keyword                                      \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n32.                                                    Token.Text.Whitespace                              \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n33. (                                                  Token.Punctuation                                  \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n34. ID                                                 Token.Name                                         \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n35. )                                                  Token.Punctuation                                  \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n36. )                                                  Token.Punctuation                                  \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n37. ;                                                  Token.Punctuation                                  \u0026#x3C;class 'sqlparse.sql.Token'\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"método-para-obtener-el-nombre-de-la-tabla\"\u003eMétodo para obtener el nombre de la tabla\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#método-para-obtener-el-nombre-de-la-tabla\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eLas tablas que nos interesa analizar todas tienen siempre la siguiente estructura \u003c/p\u003e\n\u003cpre class=\"language-sql\"\u003e\u003ccode class=\"language-sql\"\u003e\u003cspan class=\"token keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eTABLE\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eIF\u003c/span\u003e \u003cspan class=\"token operator\"\u003eNOT\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eEXISTS\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e my_table_name \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003epor lo que para encontrar el nombre de la tabla necesitamos encontrar el primer token de tipo \u003ccode\u003eIdentifier\u003c/code\u003e que encontnró el parser y extraer su valor, como se ve en el siguiente ejemplo:\u003c/p\u003e\n\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python\"\u003e\u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e token \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e statement\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eisinstance\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003etoken\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e sqlparse\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003esql\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eIdentifier\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003etoken\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eget_name\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eupper\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003ebreak\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode\u003eMY_TABLE\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"extrayendo-una-lista-de-tablas-y-sus-nombres\"\u003eExtrayendo una lista de tablas y sus nombres\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#extrayendo-una-lista-de-tablas-y-sus-nombres\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003eEl volcado SQL puede tener una mezcla de definiciones de estructuras de datos y otros tipos de código SQL, por ejemplo un query de búsqueda\u003c/p\u003e\n\u003cpre class=\"language-sql\"\u003e\u003ccode class=\"language-sql\"\u003e\u003cspan class=\"token keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eTABLE\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eIF\u003c/span\u003e \u003cspan class=\"token operator\"\u003eNOT\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eEXISTS\u003c/span\u003e MY_TABLE \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eID TLLAVE \u003cspan class=\"token operator\"\u003eNOT\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNULL\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eCONSTRAINT\u003c/span\u003e PK_MY_TABLE \u003cspan class=\"token keyword\"\u003ePRIMARY\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eKEY\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eID\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eFROM\u003c/span\u003e ANOTHER_TABLE\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eTABLE\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eIF\u003c/span\u003e \u003cspan class=\"token operator\"\u003eNOT\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eEXISTS\u003c/span\u003e MY_OTHER_TABLE \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eID TLLAVE \u003cspan class=\"token operator\"\u003eNOT\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNULL\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eCONSTRAINT\u003c/span\u003e PK_MY_TABLE \u003cspan class=\"token keyword\"\u003ePRIMARY\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eKEY\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eID\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003elo que hacemos es utilizar \u003ccode\u003esqlparse\u003c/code\u003e para encontrar cada statement y determiar si es de tipo \u003ccode\u003eCREATE\u003c/code\u003e de modo que para statements de este tipo aplicamos el algoritmo de la sección anterior para encontrar el nombre de la tabla.\u003c/p\u003e\n\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python\"\u003eSQLDUMP \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token triple-quoted-string string\"\u003e\"\"\"CREATE TABLE IF NOT EXISTS MY_TABLE (ID TLLAVE NOT NULL,\n    CONSTRAINT PK_MY_TABLE PRIMARY KEY (ID));\n\nSELECT * FROM ANOTHER_TABLE;\n\nCREATE TABLE IF NOT EXISTS MY_OTHER_TABLE (ID TLLAVE NOT NULL,\n    CONSTRAINT PK_MY_TABLE PRIMARY KEY (ID));\n\"\"\"\u003c/span\u003e\n\nparsed \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e sqlparse\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eparse\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eSQLDUMP\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e statement \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eenumerate\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eparsed\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string-interpolation\"\u003e\u003cspan class=\"token string\"\u003ef\"\u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e. \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003estatement\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eget_type\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode\u003e0. CREATE\n1. SELECT\n2. CREATE\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python\"\u003e\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003eget_name\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003estatement\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e Statement\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e Optional\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token builtin\"\u003estr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e token \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e statement\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eisinstance\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003etoken\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e sqlparse\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003esql\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eIdentifier\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e token\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003evalue\n    \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNone\u003c/span\u003e \n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python\"\u003e\u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e statement \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eenumerate\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eparsed\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    statement_type \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e statement\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eget_type\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e statement_type \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"CREATE\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        name \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e get_name\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003estatement\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string-interpolation\"\u003e\u003cspan class=\"token string\"\u003ef\"\u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e. \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003estatement_type\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e: \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode\u003e0. CREATE: MY_TABLE\n2. CREATE: MY_OTHER_TABLE\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"determinando-el-tipo-de-objeto-creado\"\u003eDeterminando el tipo de objeto creado\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#determinando-el-tipo-de-objeto-creado\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cp\u003eEn un caso más general, podemos tener volcados sql con varios tipos de objetos, por ejemplo\u003c/p\u003e\n\u003cpre class=\"language-sql\"\u003e\u003ccode class=\"language-sql\"\u003e\u003cspan class=\"token keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eTABLE\u003c/span\u003e MY_TABLE \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eID \u003cspan class=\"token keyword\"\u003eINTEGER\u003c/span\u003e \u003cspan class=\"token operator\"\u003eNOT\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNULL\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eINDEX\u003c/span\u003e MY_INDEX \u003cspan class=\"token keyword\"\u003eON\u003c/span\u003e MY_TABLE\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eID\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eanalizando los tokens de cada statement es posible determinar el tipo de objeto.\u003c/p\u003e\n\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python\"\u003eSQL \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token triple-quoted-string string\"\u003e\"\"\"CREATE TABLE MY_TABLE (ID INTEGER NOT NULL);\n\nSELECT * FROM MY_OTHER_TABLE;\n\nCREATE INDEX MY_INDEX ON MY_TABLE(ID);\n\"\"\"\u003c/span\u003e\n\nparsed \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e sqlparse\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eparse\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eSQL\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\nstatement \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e parsed\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\n\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python\"\u003etype_found \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eFalse\u003c/span\u003e \nname_found \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eFalse\u003c/span\u003e \n\u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e token \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e statement\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e type_found \u003cspan class=\"token keyword\"\u003eand\u003c/span\u003e name_found\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003ebreak\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eelif\u003c/span\u003e token\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ettype \u003cspan class=\"token keyword\"\u003eis\u003c/span\u003e Keyword \u003cspan class=\"token keyword\"\u003eand\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enot\u003c/span\u003e type_found\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        type_found \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eTrue\u003c/span\u003e \n        token_type \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e token\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003evalue\n    \u003cspan class=\"token keyword\"\u003eelif\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eisinstance\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003etoken\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e sqlparse\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003esql\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eIdentifier\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eand\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enot\u003c/span\u003e name_found\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        name_found \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eTrue\u003c/span\u003e \n        token_name \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e token\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003evalue\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string-interpolation\"\u003e\u003cspan class=\"token string\"\u003ef\"tipo: \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003etoken_type\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e, nombre: \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003etoken_name\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode\u003etipo: TABLE, nombre: MY_TABLE\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eEn el código anterior asumimos que todas las cláusulas son simples, es decir del estilo \"CREATE ....\", si estuvieran agrupadas, por ejemplo \"(CREATE ....)\" el  algoritmo ya no es tan simple, pues debe de realizar el escaneo de manera recursiva, un ejemplo de este tipo de algoritmo se encuentra en el repositorio de \u003ccode\u003esqlparse\u003c/code\u003e:\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/andialbrecht/sqlparse/blob/master/examples/extract_table_names.py\"\u003ehttps://github.com/andialbrecht/sqlparse/blob/master/examples/extract_table_names.py\u003c/a\u003e\u003c/p\u003e\n\u003ch3 id=\"extrayendo-el-nombre-y-tipo-de-objeto-creado-de-un-volcado-completo\"\u003eExtrayendo el nombre y tipo de objeto creado de un volcado completo\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#extrayendo-el-nombre-y-tipo-de-objeto-creado-de-un-volcado-completo\"\u003e\u003c/a\u003e\u003c/h3\u003e\n\u003cpre class=\"language-python\"\u003e\u003ccode class=\"language-python\"\u003eSQL \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token triple-quoted-string string\"\u003e\"\"\"CREATE TABLE MY_TABLE (ID INTEGER NOT NULL);\n\nSELECT * FROM MY_OTHER_TABLE;\n\nCREATE INDEX MY_INDEX ON MY_TABLE(ID);\n\"\"\"\u003c/span\u003e\n\n\u003cspan class=\"token decorator annotation punctuation\"\u003e@dataclass\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eMetadata\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token builtin\"\u003etype\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estr\u003c/span\u003e\n    name\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003estr\u003c/span\u003e \n    \n\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003eget_metadata\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003estatement\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e Statement\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e Metadata\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    type_found \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eFalse\u003c/span\u003e \n    name_found \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eFalse\u003c/span\u003e \n    object_name \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNone\u003c/span\u003e \n    object_type \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eNone\u003c/span\u003e \n    \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e token \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e statement\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e type_found \u003cspan class=\"token keyword\"\u003eand\u003c/span\u003e name_found\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"token keyword\"\u003ebreak\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eelif\u003c/span\u003e token\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ettype \u003cspan class=\"token keyword\"\u003eis\u003c/span\u003e Keyword \u003cspan class=\"token keyword\"\u003eand\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enot\u003c/span\u003e type_found\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n            type_found \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eTrue\u003c/span\u003e \n            object_type \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e token\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003evalue\n        \u003cspan class=\"token keyword\"\u003eelif\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eisinstance\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003etoken\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e sqlparse\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003esql\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eIdentifier\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eand\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enot\u003c/span\u003e name_found\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n            name_found \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eTrue\u003c/span\u003e \n            object_name \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e token\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003evalue\n    \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e Metadata\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ename\u003cspan class=\"token operator\"\u003e=\u003c/span\u003eobject_name\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token builtin\"\u003etype\u003c/span\u003e\u003cspan class=\"token operator\"\u003e=\u003c/span\u003eobject_type\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n\nparsed \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e sqlparse\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eparse\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eSQL\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e i\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e statement \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eenumerate\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eparsed\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    name_found \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token boolean\"\u003eFalse\u003c/span\u003e \n    \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e statement\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eget_type\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e!=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"CREATE\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003econtinue\u003c/span\u003e\n    metadata \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e get_metadata\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003estatement\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ei\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e metadata\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cpre\u003e\u003ccode\u003e0 Metadata(type='TABLE', name='MY_TABLE')\n2 Metadata(type='INDEX', name='MY_INDEX')\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"referencias\"\u003eReferencias\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#referencias\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\u003ca href=\"https://sqlparse.readthedocs.io/en/latest/\"\u003ehttps://sqlparse.readthedocs.io/en/latest/\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/andialbrecht/sqlparse/blob/master/examples/extract_table_names.py\"\u003ehttps://github.com/andialbrecht/sqlparse/blob/master/examples/extract_table_names.py\u003c/a\u003e\u003c/li\u003e\n\u003c/ol\u003e","noteIndex":{"id":"root","title":"Inicio","desc":"","updated":1737734545982,"created":1595961348801,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":".","selfContained":true,"name":"Dendron"},"contentHash":"29eefcfb54e9325926e3bd85ed2ed09f","links":[],"anchors":{},"children":["631hw9oh0k8jhc0wlm0joyz","rzreoc67l24hzknyqbn3a9b"],"parent":null,"data":{},"body":"\nWelcome to my notes space, this site is a collection of disorganized notes related to my work. Feel free to explore, if you find any of this, useful simply copy/paste or share. \n\nHave fun,\n\nIsra.\n\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true,"enableSelfContainedVaults":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"dependencies/github.com/renegarcia/eleventa-db","remote":{"type":"git","url":"git@github.com:renegarcia/eleventa-db.git"},"selfContained":true,"name":"eleventa-db"},{"fsPath":".","selfContained":true,"name":"Dendron"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"task","dateFormat":"y.MM.dd","addBehavior":"asOwnDomain","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"taskCompleteStatus":["done","x"],"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"enableFullHierarchyNoteTitle":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Notes","description":"Personal Knowledge Space or Rene Garcia"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"search","enableHierarchyDisplay":true,"hierarchyDisplayTitle":"Children","duplicateNoteBehavior":{"action":"useVault","payload":["eleventa-db","Dendron"]},"siteUrl":"https://renegarcia.github.io","assetsPrefix":"/dendron","siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true},"page":"/notes/[id]","query":{"id":"6zw1kq25fhhqug5i45y1srj"},"buildId":"6Zkb9p3DY-DVMGnZzSWvr","assetPrefix":"/dendron","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>